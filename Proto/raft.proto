syntax = "proto3";

service Raft{
  rpc AppendEntries(AppendEntriesArgs) returns (AppendEntriesRes) {};
  rpc RequestVote(RequestVotesArgs) returns (RequestVotesRes) {};
  rpc ServeClient (ServeClientArgs) returns (ServeClientReply) {};

}

message entry{
  int32 index = 1;
  int32 key = 2;
  int32 val = 3;
}

message AppendEntriesArgs{
  int32 term = 1;
  int32 leaderId = 2;
  int32 prevLogIndex = 3;
  int32 prevLogTerm = 4;
  repeated entry entries = 5;
  int32 leaderCommit = 6;
  int32 leaseInterval = 7;
}

message AppendEntriesRes{
  int32 term = 1;
  bool success = 2;
}

message RequestVotesArgs{
  int32 term = 1;
  int32 candidateId = 2;
  int32 lastLogIndex = 3;
  int32 lastLogTerm = 4;
}

message RequestVotesRes{
  int32 term = 1;
  bool voteGranted = 2;
  int32 longestDurationRem = 3;
}

message ServeClientArgs {
  string Request = 1;
}

message ServeClientReply {
  string Data = 1;
  string LeaderID = 2;
  bool Success = 3;
}

